<div class="row grp-margin">
    <!-- UNDEPLOY BUTTON -->
    <button style="margin:20px;"
            class="btn btn-danger"
            ng-if="environment.environmentType !== 'PRODUCTION'"
            ng-disabled="isAnyState(['INIT_DEPLOYMENT', 'UNDEPLOYMENT_IN_PROGRESS', 'UNDEPLOYED'])"
            ng-click="doUndeploy()">{{'APPLICATIONS.UNDEPLOY' | translate}}
    </button>
    <button style="margin:20px;"
            class="btn btn-danger"
            ng-if="environment.environmentType === 'PRODUCTION'"
            ng-disabled="isAnyState(['INIT_DEPLOYMENT', 'UNDEPLOYMENT_IN_PROGRESS', 'UNDEPLOYED'])"
            confirm="{{ 'APPLICATIONS.UNDEPLOY_CONFIRM' | translate }}"
            confirm-title="{{ 'COMMON.ATTENTION' | translate }}"
            confirm-placement="right"
            confirm-class="popover"
            confirm-handler="doUndeploy()"
            ng-click="$event.stopPropagation();">{{'APPLICATIONS.UNDEPLOY' | translate}}
    </button>
    <div class="col-md-12">
      <div class="content-head" ng-click="isOrchestratorDeploymentPropertiesCollapsed = !isOrchestratorDeploymentPropertiesCollapsed">
        <i class="fa fa-cog"></i> Reminder of current deployment
      </div>
      <div class = "row" style="margin-top: 10px">
        <div class = "col-md-6">
          <span class = "detail-term"> {{'APPLICATIONS.APPLICATION' | translate }} : </span> <span class = "inline-block">{{application.name}}</span>
        </div>
        <div class = "col-md-6">
          <span class = "detail-term"> {{'COMMON.VERSION' | translate }} : </span> <span class = "inline-block">{{topology.topology.archiveVersion}}</span>
        </div>
        <div class = "col-md-6">
          <span class = "detail-term"> {{'APPLICATIONS.ENVIRONMENT.ENV' | translate }} : </span> <span class = "inline-block">{{environment.name}}</span>
        </div>
        <div class = "col-md-6">
          <span class = "detail-term"> {{'APPLICATIONS.ENVIRONMENT.FORM.ENV_TYPE' | translate }} : </span> <span class = "inline-block">{{environment.environmentType}}</span>
        </div>

        <div class="col-md-12" style="margin-top: 20px;">
          <div class="content-head">
            <i class="fa fa-cubes"></i> Ressources installed
          </div>
          <div class="content-body" style="overflow: auto; max-height: 300px;">
            <table class="table table-condensed" id="locationResources">
              <tr ng-repeat="(key, value) in locationResources">
                <td>
                  {{key}}
                </td>
                <td>
                  ( <i>{{value.type}}</i> )
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>

    <display-outputs></display-outputs>

    <div class=col-md-6>
        <!-- Description -->
        <div class="col-md-12" style="margin-top: 20px;">
            <div class="row" style="margin-top: 10px;">
                <div class="col-md-4">
                    <strong>{{'CREATION_DATE' | translate }}</strong>
                </div>
                <div class="col-md-8">{{application.creationDate | date:'medium'}}</div>
            </div>

            <div class="row" style="margin-top: 10px;">
                <div class="col-md-4">
                    <strong>{{'UPDATE_DATE' | translate }}</strong>
                </div>
                <div class="col-md-8">{{application.lastUpdateDate | date:'medium'}}</div>
            </div>
        </div>
    </div>

    <!-- Meta Properties and tags -->
    <div class=col-md-6>
        <!-- Meta Properties display -->
        <meta-properties-display ng-if="isManager && application.metaProperties" properties-type="'application'" target="application"
            resturl="'rest/v1/applications/:applicationId/properties'" params="{applicationId: application.id}">
        </meta-properties-display>
        <!-- End Meta Properties display -->
    </div>

</div>
